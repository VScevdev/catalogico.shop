{% load static %}

<header class="site-header">
  <div class="header-container">

    <!-- Brand -->
    {% if STORE_LOGO_URL %}
    <div class="header-brand header-brand--has-logo">
      <a href="/" class="brand-logo">
        <img src="{{ STORE_LOGO_URL }}" alt="{{ SITE_NAME|default:'CatÃ¡logo' }}">
      </a>
      <a href="/" class="brand-link">
        {{ SITE_NAME|default:"CatÃ¡logo" }}
      </a>
    </div>
    {% else %}
    <div class="header-brand header-brand--no-logo">
      <a href="/" class="brand-link">
        {{ SITE_NAME|default:"CatÃ¡logo" }}
      </a>
    </div>
    {% endif %}

    <!-- Search -->
    <form class="search-bar" method="get" action="{% url 'catalog:catalog' %}">

        <input
            type="text"
            name="q"
            placeholder="Buscar productos..."
            value="{{ q|default:'' }}"
        >

        {% for slug in selected_categories %}
            <input type="hidden" name="category" value="{{ slug }}">
        {% endfor %}

        <button type="submit" aria-label="Buscar">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
            <line x1="16.65" y1="16.65" x2="21" y2="21"
                  stroke="currentColor" stroke-width="2"/>
          </svg>
        </button>

    </form>
    <!-- Actions -->
    <div class="header-actions">
        {% if current_store %}
        <a href="{% url 'catalog:cart_detail' %}" class="header-cart-link" aria-label="Ver carrito">
            <span class="header-cart-icon" aria-hidden="true">ðŸ›’</span>
            {% if cart_count|default:0 > 0 %}
            <span class="header-cart-badge">{{ cart_count }}</span>
            {% endif %}
        </a>
        {% endif %}
        <button id="theme-toggle" class="theme-toggle" aria-label="Cambiar tema">
            ðŸŒ™
        </button>
    </div>

  </div>
</header>