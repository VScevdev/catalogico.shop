{% load static %}
{% load price_filters %}

{% if product.slug %}
<article class="product-card">
  <a href="{% url 'catalog:product_detail' product.slug %}" class="product-card-link">

    <div class="product-card-image">
      {% if product.thumbnail %}
        <img src="{{ product.thumbnail.image.url }}" alt="{{ product.name }}">
      {% else %}
        <div class="image-placeholder">
          <img src="{% static 'images/placeholder.png' %}" alt="{{ product.name }}">
        </div>
      {% endif %}
    </div>

    <div class="product-card-body">
      <h3 class="product-card-title">{{ product.name }}</h3>
      {% if product.price and product.price > 0 %}
      <p class="product-card-price">${{ product.price|ars }}</p>
      {% endif %}
    </div>

  </a>
  {% if product.links.exists %}
  <div class="product-card-add-cart">
    <form method="post" action="{% url 'catalog:cart_add' %}" class="product-card-cart-form">
      {% csrf_token %}
      <input type="hidden" name="product_id" value="{{ product.id }}">
      <input type="hidden" name="next" value="{{ catalog_full_path|default:'' }}">
      <button type="submit" class="product-card-cart-btn">Agregar al carrito</button>
    </form>
  </div>
  {% endif %}
</article>
{% else %}
  <div class="product-card disabled">
{% endif %}