{% extends "base/base.html" %}

{% block title %}{{ SITE_NAME|default:"Catálogo" }}{% endblock %}

{% block content %}
<section class="catalog-wrapper">

    <div class="mobile-brand-header">
        <a href="/" class="mobile-brand-link">
            {{ SITE_NAME|default:"Catálogo" }}
        </a>
        <button class="filters-toggle" aria-expanded="false">
            Filtros
            {% if active_filters %}
                <span class="filters-badge"> {{ active_filters|length }} </span>
            {% endif %}
        </button>
    </div>

    

    <section class="catalog-layout">

        <div class="catalog-overlay"></div>
        <!-- Sidebar -->
        <aside class="catalog-sidebar">            
            <div class="catalog-sidebar-header">
                <span>Filtros</span>
                <button class="filters-close" aria-label="Cerrar filtros">
                    X
                </button>
            </div>
            {% if active_filters %}
            <div class="active-filters">
                {% for chip in active_filters %}
                    <a href="{{ chip.url }}" class="filter-chip">
                        {{ chip.label }}
                        <span class="chip-remove">×</span>
                    </a>
                {% endfor %}
            </div>
            {% endif %}

            {% if has_filters %}
                <div class="catalog-actions">
                    <a href="{% url 'catalog:catalog' %}" class="clear-filters-btn">
                        Borrar filtros
                    </a>
                </div>
            {% endif %}            

            <div class="catalog-header">
                {% include "components/sort_select.html" %}
            </div>

            <div>
                <h3 class="category-title">
                    {% include "components/category_filter.html" %}
                </h3>
            </div>

            <p class="results-count">
                {{ paginator.count }} Productos
            </p>
            
        </aside>

        <!-- Products -->
        <section class="catalog-content">
            {% if is_store_owner %}
                <div class="catalog-owner-actions">
                    <a href="{% url 'catalog:product_list' %}" class="catalog-owner-btn">
                        Panel de productos
                    </a>
                </div>
            {% endif %}
            <div class="products-grid">
                {% for product in products %}
                    {% include "catalog/product_card.html" %}
                {% empty %}
                    <p class="empty-message">No hay productos disponibles.</p>
                {% endfor %}
            </div>

            <!-- Footer / paginación -->
            <div class="catalog-footer">
                {% include "components/pagination.html" %}
            </div>
        </section>

    </section>

</section>
{% endblock %}