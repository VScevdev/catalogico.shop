{% extends "base/base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}

<h1>
  {% if is_new %}
    Crear producto
  {% else %}
    Editar producto
  {% endif %}
</h1>

{# ---------- FORM PRINCIPAL (GUARDAR) ---------- #}
<form method="post">
  {% csrf_token %}

  {{ form.as_p }}

  <div
    id="media-dropzone"
    class="dropzone"
    data-upload-url="{% url 'catalog:product_media_upload' product.id %}"
    data-csrf-token="{{ csrf_token }}"
  >
    <p>Arrastrá imágenes o videos acá o hacé click</p>
    <input
      type="file"
      id="mediaInput"
      multiple
      accept="image/*,video/*"
      hidden
    >
  </div>

  <div class="form-actions" style="margin-top: 1.5rem;">
    <button type="submit" class="btn btn-primary">
      Guardar
    </button>
  </div>
</form>

{# ---------- FORM SECUNDARIO (CANCELAR) ---------- #}
<form
  method="post"
  action="{% url 'catalog:product_cancel' product.id %}"
  style="margin-top: 1rem;"
>
  {% csrf_token %}
  <button type="submit" class="btn btn-secondary">
    Cancelar
  </button>
</form>

<script src="{% static 'js/media_drop.js' %}"></script>

{% endblock %}
